Aids to testing git-multimail.

This directory contains some scripts that can be used to help test
git-multimail.  The tests are not very complete and not very
automated, but they do catch many errors.

It is likely that the test scripts only work correctly on Linux/Unix,
and it is quite possible that they require a newer version of Python
than does the git-multimail script itself.


Test scripts
============

create-test-repo:

    Create a test repository "test-repo.git" that can be used for
    testing git-multimail.  Most of the repository is created by
    loading the dumpfile "test-repo.dump", then a few more weird tags
    are created that point to objects other than commits.

test-emails:

    Runs create-test-repo and then simulates a bunch of pushes to the
    repository, writing to stdout the emails that would normally be
    sent for those pushes.  The output of this script can be filtered
    using filter-noise then compared against multimail.expect by
    running compare-emails.

filter-noise:

    Filters from the test-emails output many strings that vary
    unpredictably from one test run to another.

compare-emails:

    Compare the output of test-emails (filtered using filter-noise) to
    the expected output that is recorded in multimail.expect.

test-env:

    Runs through various configuration scenarios for
    GenericEnvironment and GitoliteEnvironment and verifies that the
    environments have set the correct values for the
    template-expansion parameters.

run-tests:

    Run all available tests.


Guidelines
==========

For an approximate test that you haven't broken anything, run

    $ t/run-tests

If this shows any differences relative to the expected output in
multimail.expect, then either

(a) your change broke something.  Fix it :-)

(b) your change intentionally changed something.  Make absolutely sure
that you like the change, then copy the new, improved output to
multimail.expect, make sure that *now* the tests run without errors,
then commit the new version of multimail.expect along with your
change.
